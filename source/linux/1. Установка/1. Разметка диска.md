# Разметка диска


## Automatic

Если положиться на автоматическую разметку, то инсталлятор в большинстве случаев создаст два раздела - один под корневую файловую систему, а другой - для подкачки. Для рабочей станции с одним накопителем такая схема вполне имеет право на жизнь. Для сервера - нет.

##### *Table 1. Workstation*
| Partition     | Mount Point   | Filesystem    | Size          |
| ------------- | ------------- | ------------- | ------------- |
| /dev/sda1     | /             | ext4          | 468.84 GB     |
| /dev/sda5     | swap          | swap          | 8 GB          |


## Manual

Для сервера правильнее будет разместить каталоги `/home` или `/var` на отдельных разделах, а еще лучше - на отдельных накопителях или же организовать RAID-массив. Эти каталоги содержат самое ценное - пользовательские данные, поэтому если они будут находиться на одном накопителе и он выйдет из строя, приятного будет мало.

Если пользователи не будут регистрироваться на сервере и тем более хранить на нем данные, то нет смысла отводить отдельный накопитель под каталог `/home`. А вот каталог `/var`, где хранятся файлы баз данных, кэш прокси-серверов, почтовые ящики желательно разместить отдельно. Если накопитель всего один, то хотя бы на отдельном разделе. Ведь это позволяет на каждом разделе использовать свою файловую систему.

##### *Table 2. Server*
| Partition     | Mount Point   | Filesystem    | Size          |
| ------------- | ------------- | ------------- | ------------- |
| /dev/sda1     | /             | ext4          | 230.42 GB     |
| /dev/sda5     | swap          | swap          | 8 GB          |
| /dev/sdb1     | /home         | btrfs         | 465.76 GB     |
| /dev/sdc1     | /var          | xfs           | 931.32 GB     |


## Notes
### Swap

В отличие от Windows, Linux использует не файлы, а разделы подкачки. Как показывает практика, раздел подкачки производительнее, чем файл. 

Если оперативной памяти достаточно (например, 16 GB или больше), тогда размер данного раздела в 8 GB будет вполне достаточно. Увеличивать размер больше не имеет смысла - ведь производительность от этого выше не станет. Когда возникают ошибки нехватки памяти или когда система не может запустить нужные приложения, наилучшее решение — оптимизировать конфигурации приложений или обновить сервер.

Когда оперативной памяти много, иногда возникает соблазн вообще отказаться от данного раздела. Этого не нужно делать. Если оперативной памяти не хватит, возможны неприятные ситуации. При современных объемах накопителей потеря 8 GB дискового пространства никак не отразится на работе всего сервера.
